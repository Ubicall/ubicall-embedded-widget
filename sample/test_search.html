<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <link href="https://cdn.ubicall.com/static/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.ubicall.com/static/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://cdn.ubicall.com/static/ubicall/css/demo/widget/widget.css" rel="stylesheet">
    <link href="https://cdn.ubicall.com/static/jquery-mobile/css/jquery.mobile.ubicall.custom-1.4.5.css" rel="stylesheet">

<style>
#search-list {
    list-style: none;
    margin: 0 5px;
    outline: 0;
    background-color: #fff;
    color: #333;
    position: absolute;
    z-index: 9999;
    border: 1px solid #ddd;
    width: 96%;
}

#search-list li a {
    padding: 8px 0;
    color: #333;
    background: #eee;
    margin: 2px 0;
    width: 100%;
    display:  block;
    text-indent: 20px;
}

#search-list li a:hover {
    color: #039997;
    background: #ddd;

}



</style>

</head>

<body>
    <div data-role="page" id="MainScreen">
        <div data-role="content">
            <div class="ubi-header"><a onclick="javascript:history.go(-1)"><i class="fa fa-chevron-left fa-left"></i></a><a href="#" onclick="UbiCallManager.goToHomeScreen()"><i class="fa fa-home fa-right"></i></a>
                <h3> Insurances</h3></div>
            <div class="ubi-search">
                <div id="imaginary_container">
                    <div class="input-group stylish-input-group">
                        <input class="form-control" placeholder="Search" type="text" data-list="#search-list" id="search_input">
                       <span class="input-group-addon"><button type="submit"><span class="fa fa-search"></span></button>
                        </span>
                    </div>
                </div>
            </div>
             <ul id="search-list"></ul>
            <div class="ubi-pages">
                <div class="list-group"><a class="list-group-item lest-01" href="#68d6d8f9.c905d8">You have an active policy with Costco auto insurance</a><a class="list-group-item lest-01" href="#8dc8d9b5.3a314">Assistance relating to a claim</a><a class="list-group-item lest-01"
                    href="#5c51f81c.54c33">Request a quote for auto, home or umbrella</a></div>
            </div>
        </div>
    </div>

    <!--choose your call type voip vs pstn  , replace call.html-->
    <div data-role="page" id="callOptions">
        <div data-role="content">
            <div class="ubi-header">
                <a onclick="javascript:history.go(-1)">
                    <i class="fa fa-chevron-left fa-left"></i>
                </a>
                <a href="#" onclick="UbiCallManager.goToHomeScreen()">
                    <i class="fa fa-home fa-right"></i>
                </a>
                <h3>Call Type</h3>
            </div>
            <div class="ubi-pages">
                <div>
                    <button onclick="UbiCallManager.scheduleSipCall()" class="btn btn-default">Receive web VoIP call</button>
                    <a href="#submitPhoneCall">
                        <button class="btn btn-default">Receive a call on Cell phone</button>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!--choose your phone call , replace submitCall.html-->
    <div data-role="page" id="submitPhoneCall">
        <div data-role="content">
            <div class="ubi-header">
                <a onclick="javascript:history.go(-1)">
                    <i class="fa fa-chevron-left fa-left"></i>
                </a>
                <a href="#" onclick="UbiCallManager.goToHomeScreen()">
                    <i class="fa fa-home fa-right"></i>
                </a>
                <h3>Support Agent</h3>
            </div>
            <div class="ubi-pages-phone">
                <img src="https://cdn.ubicall.com/static/ubicall/images/time-icon.png" class="phone-icon" alt="">
                <h2>Average Waiting Time</h2>
                <h3>ASAP</h3>
                <div class="ubi-phone-02">
                    <h4>When we should call you?</h4>
                    <form>
                        <div class="radio wid-48">
                            <label>
                                <input type="radio" name="optradio" id="asap" checked>ASAP</label>
                        </div>
                        <div class="radio wid-48">
                            <label>
                                <input type="radio" name="optradio" id="sele-time">Select Time</label>
                        </div>
                        <div class="input-time">
                            <input type="text" class="form-control input-phone" placeholder="Hours" id="hou" readonly> -
                            <input type="text" class="form-control input-phone" placeholder="Minutes" id="min" readonly>
                        </div>
                        <div class="phoneNumber form-group">
                            <input type="text" id="phone" name="phone" class="form-control" placeholder="Please enter your phone number">
                        </div>
                        <button type="submit" class="btn btn-default btn-02" onclick="helpers.submitPhoneCall()">Call Me</button>
                        <button type="submit" class="btn btn-default btn-03" onclick="UbiCallManager.goToHomeScreen()">Cancel</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!--phone call scheduled , replace phoneCallSchedule.html -->
    <div data-role="page" id="phoneCallScheduled">
        <div data-role="content">
            <div class="ubi-header">
                <a onclick="javascript:history.go(-1)">
                    <i class="fa fa-chevron-left fa-left"></i>
                </a>
                <a href="#" onclick="UbiCallManager.goToHomeScreen()">
                    <i class="fa fa-home fa-right"></i>
                </a>
                <h3 class="header">successfully scheduled phone call </h3>
            </div>
            <div class="ubi-pages">
                <h2>
          done , wait for our call ,<a onclick="UbiCallManager.goToHomeScreen()" href="#"> you can continue broswing .</a>
        </h2>
            </div>
        </div>
    </div>

    <!-- submit feedback after voip call accurred , replace feedback.html-->
    <div data-role="page" id="callFeedback">
        <div data-role="content">
            <div class="ubi-header">
                <a onclick="javascript:history.go(-1)">
                    <i class="fa fa-chevron-left fa-left"></i>
                </a>
                <a href="#" onclick="UbiCallManager.goToHomeScreen()">
                    <i class="fa fa-home fa-right"></i>
                </a>
                <h3>Feedback</h3>
            </div>
            <div class="feedback">
                <h2>Thank You!</h2>
                <h3>For Your Call</h3>
                <div class="phone-02">
                    <h4>How do you feel about our service?</h4>
                    <div class="face-img">
                        <!-- 1 happy , 2 so lala , 3 unhappy-->
                        <a href="#" onclick="helpers.iam(1)">
                            <img src="https://cdn.ubicall.com/static/ubicall/images/face-01.png" alt="happy">
                        </a>
                        <a href="#" onclick="helpers.iam(2)">
                            <img src="https://cdn.ubicall.com/static/ubicall/images/face-02.png" alt="satisfied">
                        </a>
                        <a href="#" onclick="helpers.iam(3)">
                            <img src="https://cdn.ubicall.com/static/ubicall/images/face-03.png" alt="unhappy">
                        </a>
                    </div>

                    <textarea id="feedback-message" type="text" class="form-control" name="Feedback" placeholder="Anything to add? (Optional)"></textarea>

                    <button type="submit" class="btn btn-default btn-03" onclick="UbiCallManager.goToHomeScreen()">No, Thanks</button>
                    <button type="submit" class="btn btn-default btn-02" onclick="helpers.sendFeedBack()">Send Feedback</button>

                </div>
            </div>
        </div>
    </div>

    <!-- fall back page when unexpected behaviour occurred, replace unexpected.html-->
    <div data-role="page" id="sorry">
        <div data-role="content">
            <div class="ubi-header">
                <a onclick="javascript:history.go(-1)">
                    <i class="fa fa-chevron-left fa-left"></i>
                </a>
                <a href="#" onclick="UbiCallManager.goToHomeScreen()">
                    <i class="fa fa-home fa-right"></i>
                </a>
                <h3 class="header">unexpected behaviour</h3>
            </div>
            <div class="ubi-pages">
                <h2>
          sorry , something unexpected happen , and will be fixed soon <a onclick="UbiCallManager.goToHomeScreen()" href="#"> but you still broswing .</a>
        </h2>
            </div>
        </div>
    </div>
    <!-- js -->
    <script src="https://cdn.ubicall.com/static/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.ubicall.com/static/jquery-mobile/js/jquery.mobile-1.4.5.min.js"></script>
    <script src="https://platform.ubicall.com/widget/callmanager.js"></script>

    <script>
        var helpers = helpers || {};
        $(document).ready(function() {
            var feedback = {};

            helpers.submitCallForm = function(form_id) {
                if (!form_id) {
                    UbiCallManager.fallBackToErrorPage();
                } else {
                    var formData = JSON.stringify($('form#' + form_id).serializeArray());
                    // formData like // [{"name":"Enter the last name of the person you wish to speak with","value":"name xxx"}]
                    //TODO should be replaced to be {'Enter the last name of the person you wish to speak with' : 'name xxx' }
                    var qid = $('form#' + form_id + ' #qid').val();
                    UbiCallManager.setFormDate(formData);
                    UbiCallManager.setPhoneCallQueue(qid);
                    UbiCallManager.goToCallOptions();
                }
            }

            $("#sele-time").click(function() {
                $('#hou').prop('readonly', false);
                $('#min').prop('readonly', false);
            });
            $("#asap").click(function() {
                $('#hou').attr('readonly', 'readonly');
                $('#min').attr('readonly', 'readonly');
            });

            helpers.submitPhoneCall = function() {
                var phoneNumber = $('#phone').val();
                var time;
                if ($('#sele-time').is(':checked')) {
                    time = $('#hou').text() + ':' + $('#min').text();
                }
                if (phoneNumber) {
                    UbiCallManager.schedulePhoneCall(phoneNumber, time);
                } else {
                    $('.phoneNumber').addClass('has-error');
                }
            }

            helpers.iam = function(you) {
                feedback.feel = you;
            }
            helpers.sendFeedBack = function() {
                feedback.text = $('#feedback-message').val();
                UbiCallManager.submitFeedback(feedback)
            }








            $("#search_input").keyup(function() {
                $("#search-list").empty();

                var filter = $(this).val(),
                    count = 0;
                $("body div[data-role='page']  ").each(function() {


                 
                        if ($(this).find("h3").text().search(new RegExp(filter, "i")) > 0) {

                            var id = $(this).attr("id");
                            var a = $('<a/>').attr('href', '#' + id).append($(this).find("h3").text());
                            var li = $('<li/>').append(a);
                            $("#search-list").append(li);
                            count++;
                        }

                   

                });

                //$("#filter-count").text("Number of Comments = "+count);
            });





        });
    </script>

    <!-- js End -->

</body>

</html>
